<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>머핀홀딩스 개발사업 통합페이지</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=3,minimum-scale=1,user-scalable=yes">
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" href="https://cnt-mh.github.io/MH/DEV/LOGO/favicon.png">
  <style>
    :root {
      --bg: #f7f9fc; --text: #333;
      --font: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      --radius: 16px;
    }
    * {margin:0;padding:0;box-sizing:border-box;font-family:var(--font);}
    body {background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;}
    header {background:#002ea7;color:white;text-align:center;padding:0.8rem;font-weight:700;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
    header .header-inner {display:flex;align-items:center;justify-content:center;gap:0.5rem;}
    header img {max-height:38px;}
    main {flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.2rem;padding:1.4rem;}
    .card {background:white;border-radius:var(--radius);box-shadow:0 4px 12px rgba(0,0,0,0.08);padding:1.3rem;border-top:6px solid transparent;transition:transform 0.25s, box-shadow 0.25s;}
    .card:hover {transform:translateY(-4px);box-shadow:0 6px 16px rgba(0,0,0,0.12);}
    .badge {display:inline-block;background:#e5e9ff;color:#002ea7;font-size:0.8rem;font-weight:600;padding:0.25rem 0.6rem;border-radius:3px;margin-bottom:0.3rem;}
    .card h3 {margin-bottom:0.5rem;color:#002ea7;}
    .card a {margin-top:auto;background:#002ea7;color:white;text-decoration:none;padding:0.45rem 0.9rem;border-radius:8px;font-size:0.88rem;}
    footer {text-align:center;font-size:0.8rem;color:#777;padding:1rem;border-top:1px solid #ddd;background:#fafafa;}
    button.logout {position:fixed;top:15px;right:15px;padding:0.4rem 0.8rem;border:none;background:#ff4444;color:white;border-radius:6px;cursor:pointer;}
  </style>
</head>

<body>
  <header>
    <div class="header-inner">
      <img src="http://www.mholdings.co.kr/RAD/PEG/logo_17103186357105.png" alt="로고">
      <span>머핀홀딩스 개발사업 통합페이지</span>
    </div>
  </header>

  <button class="logout" onclick="netlifyIdentity.logout()">로그아웃</button>

  <main>
    <div class="card">
      <h3>엑스포 아파트 재건축</h3>
      <div class="badge" id="expoStage">로딩 중...</div>
      <p id="expoCurr">금주 이슈 불러오는 중...</p>
      <a href="https://cnt-mh.github.io/MH/DEV/APT/EXPO/index.html" target="_blank">🌐 바로가기</a>
    </div>

    <div class="card">
      <h3>사당12구역 신통</h3>
      <div class="badge" id="sadang12Stage">로딩 중...</div>
      <p id="sadang12Curr">금주 이슈 불러오는 중...</p>
      <a href="https://cnt-mh.github.io/REDEV/SITE2/SD/12/index.html" target="_blank">🌐 바로가기</a>
    </div>
  </main>

  <footer>© 2025 머핀홀딩스 내부용</footer>

  <!-- ✅ 데이터 불러오기 -->
  <script>
    const SHEET_URL = "https://script.google.com/macros/s/AKfycbybMyca3x_BszUiTnq50g-XolayOM_uY-_tjR8-wZvrwkZPixa6qJnAYueHbyfcRDEL/exec";
    fetch(SHEET_URL)
      .then(res => res.json())
      .then(data => {
        data.forEach(item => {
          const name = item.현장명;
          const curr = item.금주이슈.replace(/\n/g,"<br>");
          const stage = item.진행단계;

          if(name.includes("엑스포")) {
            expoCurr.innerHTML = curr;
            expoStage.textContent = stage;
          } else if(name.includes("사당12")) {
            sadang12Curr.innerHTML = curr;
            sadang12Stage.textContent = stage;
          }
        });
      });
  </script>

  <!-- ✅ Netlify Identity -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (window.netlifyIdentity) {
        netlifyIdentity.on('init', user => {
          if (!user) window.location.href = '/login.html';
        });
        netlifyIdentity.on('logout', () => window.location.href = '/logout.html');
        netlifyIdentity.init();
      }
    });
  </script>
</body>
</html>